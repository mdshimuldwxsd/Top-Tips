<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Smart Redirector â€” Step Chain</title>
  <style>
    :root{--bg:#000;--fg:#fff;--muted:#b7b7b7;--brand:#ff3c00}
    *{box-sizing:border-box}
    body{margin:0;height:100vh;display:flex;align-items:center;justify-content:center;flex-direction:column;background:var(--bg);color:var(--fg);font-family:Inter,system-ui,Segoe UI,Roboto,Arial}
    h1{font-size:22px;margin:8px 0;color:var(--brand)}
    p{margin:0;color:var(--muted);font-size:14px}
    .loader{border:6px solid #222;border-top:6px solid var(--brand);border-radius:50%;width:50px;height:50px;animation:spin 1s linear infinite;margin:18px 0}
    @keyframes spin{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}
    .btn{margin-top:10px;padding:12px 16px;border-radius:12px;border:none;background:#1b1b1b;color:#fff;font-weight:700;cursor:pointer}
    .btn[disabled]{opacity:.5;cursor:not-allowed}
    .chips{display:flex;gap:8px;margin-top:8px}
    .chip{background:#141414;border:1px solid #222;padding:6px 10px;border-radius:999px;font-size:12px;color:#dcdcdc}
    .log{width:min(520px,90vw);max-height:180px;overflow:auto;margin-top:14px;padding:12px;border:1px solid #222;border-radius:12px;background:#0f0f0f;font-size:12px;color:#cfcfcf}
  </style>
</head>
<body>
  <h1>Redirectingâ€¦ ðŸ”¥</h1>
  <p>Tabs will open step-by-step. If blocked, tap the button once.</p>
  <div class="loader"></div>

  <div class="chips">
    <span class="chip" id="stepChip">Step 0/0</span>
    <span class="chip" id="statusChip">Preparingâ€¦</span>
    <span class="chip" id="focusChip">Tab: Active</span>
  </div>

  <button id="resumeBtn" class="btn" style="display:none;">Tap to continue opening</button>
  <div id="log" class="log"></div>

<script>
/* ====== CONFIG ====== */
// Full link pool (edit as needed)
const ALL_LINKS = [
  "https://www.revenuecpmgate.com/tdktae8wh?key=45871b4a16d726563e86febbf5cceecf",
  "https://www.revenuecpmgate.com/yebn0kiq7?key=48bf70a60cf5d515a2fe21a53e858a03",
  "https://www.revenuecpmgate.com/frhb1u7s?key=e30eb46803b4577ec54b211b55673c69",
  "https://www.revenuecpmgate.com/dkp02xsrem?key=0c4b08b847d3cd5258cc86f82ac4ae96",
  "https://www.revenuecpmgate.com/rhehv4qc7?key=d6e8adfaadb70fb6aee1fd0c99730d22",
  "https://www.revenuecpmgate.com/qz1pm0zy9?key=ce6ee83d4607856b5382e048fc43c0fc",
  "https://www.revenuecpmgate.com/fgrdxxcd?key=a5cd666eddae5c266ecedca6fcdf086e",
  "https://www.revenuecpmgate.com/hwh0shg1e?key=0be751bce0f004f5a676a4a32c3a993d",
  "https://www.revenuecpmgate.com/h3p8bf3ts?key=fe07c51715314c0a037c45409ce20fbf",
  "https://www.revenuecpmgate.com/efczd4ebi?key=477ed64a83e1ca6192ab2fa91a117a14"
];

// Open 3 or 4 links per visit (random)
const OPEN_COUNT = Math.floor(Math.random()*2) + 3; // 3 or 4
// Delay between each tab (ms). Small randomization to look natural.
const BASE_DELAY_MS = 2000; // 2s
const JITTER_MS = 500;      // Â±0.5s
// Pause when tab is not visible (more natural & avoids blocked bursts)
const PAUSE_WHEN_HIDDEN = true;

/* ====== UI Helpers ====== */
const logBox   = document.getElementById('log');
const stepChip = document.getElementById('stepChip');
const statusChip = document.getElementById('statusChip');
const focusChip  = document.getElementById('focusChip');
const resumeBtn  = document.getElementById('resumeBtn');

function log(msg){
  const t = new Date().toLocaleTimeString();
  logBox.innerHTML = `[${t}] ${msg}<br>` + logBox.innerHTML;
}
function setStatus(txt){ statusChip.textContent = txt; }
function setFocusChip(){ focusChip.textContent = `Tab: ${document.hidden ? 'Inactive' : 'Active'}`; }

/* ====== Utils ====== */
function shuffle(arr){
  const a = arr.slice();
  for(let i=a.length-1;i>0;i--){
    const j = Math.floor(Math.random()*(i+1));
    [a[i],a[j]] = [a[j],a[i]];
  }
  return a;
}
function sample(arr, n){ return shuffle(arr).slice(0, n); }
function delay(ms){ return new Promise(res => setTimeout(res, ms)); }
function randomDelay(){ return BASE_DELAY_MS + (Math.random()*2-1)*JITTER_MS; }

/* ====== Open Logic ====== */
let selected = sample(ALL_LINKS, Math.min(OPEN_COUNT, ALL_LINKS.length));
let idx = 0;
let blockedOnce = false; // if true, show resume button

function updateSteps(){ stepChip.textContent = `Step ${Math.min(idx, selected.length)}/${selected.length}`; }

function tryOpen(url){
  // Attempt to open in new tab. Returns true if not blocked.
  const w = window.open(url, '_blank', 'noopener');
  return !!w;
}

async function openChain(autoStarted){
  setStatus(autoStarted ? 'Auto running' : 'Resumed');
  while(idx < selected.length){
    if(PAUSE_WHEN_HIDDEN && document.hidden){
      setStatus('Paused (tab hidden)');
      await new Promise(res => {
        const onVis = ()=>{ if(!document.hidden){ document.removeEventListener('visibilitychange', onVis); res(); } };
        document.addEventListener('visibilitychange', onVis);
      });
      setStatus('Auto running');
    }

    const url = selected[idx];
    const ok = tryOpen(url);

    if(ok){
      idx++;
      updateSteps();
      log(`Opened: ${url}`);
      await delay(randomDelay());
    } else {
      // Popup blocked â†’ show resume button once and break
      blockedOnce = true;
      setStatus('Blocked by browser');
      resumeBtn.style.display = 'inline-block';
      log('Popup blocked. Tap the button to continue opening.');
      break;
    }
  }

  if(idx >= selected.length){
    setStatus('Completed');
    resumeBtn.style.display = 'none';
    log('All steps completed âœ…');
  }
}

/* ====== Event Wiring ====== */
resumeBtn.addEventListener('click', ()=>{
  resumeBtn.setAttribute('disabled','disabled');
  openChain(false).finally(()=> resumeBtn.removeAttribute('disabled'));
});
document.addEventListener('visibilitychange', setFocusChip);
window.addEventListener('focus', setFocusChip);

updateSteps();
setFocusChip();
setStatus('Initializingâ€¦');

// Start automatically on load
window.addEventListener('load', ()=>{
  updateSteps();
  openChain(true);
});
</script>
</body>
</html>
